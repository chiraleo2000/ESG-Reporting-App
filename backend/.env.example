# ESG Reporting Application - Backend Environment Variables
# Copy this file to .env and update values for your environment

# ===========================================
# APPLICATION
# ===========================================
NODE_ENV=development
PORT=3000
API_VERSION=v1
APP_NAME=ESG Reporting API
APP_URL=http://localhost:3000

# ===========================================
# DATABASE (PostgreSQL)
# ===========================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=esg_reporting
DATABASE_USER=postgres
DATABASE_PASSWORD=your_secure_password_here
DATABASE_SSL=false
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# Full connection string (alternative to individual settings)
# DATABASE_URL=postgresql://postgres:password@localhost:5432/esg_reporting

# ===========================================
# REDIS (Caching & Sessions)
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=esg:

# Full connection string (alternative)
# REDIS_URL=redis://localhost:6379/0

# ===========================================
# JWT AUTHENTICATION
# ===========================================
JWT_SECRET=your_super_secret_jwt_key_min_32_characters_long
JWT_EXPIRES_IN=1d
JWT_REFRESH_SECRET=your_refresh_token_secret_key_min_32_chars
JWT_REFRESH_EXPIRES_IN=7d

# ===========================================
# ENCRYPTION
# ===========================================
ENCRYPTION_KEY=32_character_encryption_key_here

# ===========================================
# FILE UPLOADS
# ===========================================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=xlsx,xls,csv,pdf,png,jpg,jpeg

# ===========================================
# EXTERNAL APIs
# ===========================================
# SERPAPI (for emission factor searches)
SERPAPI_KEY=your_serpapi_key_here
SERPAPI_TIMEOUT=30000

# ===========================================
# LLM / EMBEDDINGS (Vector Search)
# ===========================================
# Provider: 'openai' or 'azure'
EMBEDDING_PROVIDER=openai

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002

# Azure OpenAI Configuration (if using Azure)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_API_KEY=your-azure-openai-api-key
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002
AZURE_OPENAI_API_VERSION=2024-02-01

# Vector Search Settings
EMBEDDING_DIMENSIONS=1536
EMBEDDING_CACHE_TTL_HOURS=24
SEMANTIC_SEARCH_LIMIT=10
SIMILARITY_THRESHOLD=0.7

# ===========================================
# EMAIL (Optional - for notifications)
# ===========================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@example.com
SMTP_PASSWORD=your_email_password
EMAIL_FROM=noreply@example.com

# ===========================================
# LOGGING
# ===========================================
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_DIR=./logs

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# CORS
# ===========================================
CORS_ORIGIN=http://localhost:2048
CORS_CREDENTIALS=true

# ===========================================
# SCHEDULED JOBS
# ===========================================
# Audit log retention (7 years = 2555 days)
AUDIT_RETENTION_DAYS=2555

# Grid EF update check day (January 15th)
GRID_EF_UPDATE_DAY=15
GRID_EF_UPDATE_MONTH=1

# ===========================================
# FEATURE FLAGS
# ===========================================
ENABLE_SERPAPI_SEARCH=true
ENABLE_DIGITAL_SIGNATURES=true
ENABLE_AUDIT_LOGGING=true
ENABLE_SCHEDULED_JOBS=true
ENABLE_VECTOR_SEARCH=true
ENABLE_LLM_FEATURES=true

# ===========================================
# CALCULATION SETTINGS
# ===========================================
# Tier 2+ multiplier for higher accuracy calculations
TIER2_PLUS_MULTIPLIER=1.3

# Default uncertainty percentage
DEFAULT_UNCERTAINTY_PERCENTAGE=10

# ===========================================
# SECURITY
# ===========================================
BCRYPT_ROUNDS=12
SESSION_SECRET=your_session_secret_here

# ===========================================
# MONITORING (Optional)
# ===========================================
# SENTRY_DSN=https://your-sentry-dsn
# NEW_RELIC_LICENSE_KEY=your_new_relic_key
